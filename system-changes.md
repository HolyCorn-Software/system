.

Improved error handling, especially with HTTP.

Improved typing.